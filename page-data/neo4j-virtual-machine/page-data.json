{"componentChunkName":"component---src-templates-blog-post-js","path":"/neo4j-virtual-machine/","result":{"data":{"site":{"siteMetadata":{"title":"Paras Gupta"}},"markdownRemark":{"id":"18dc40af-a814-52c7-9246-419f475705d1","excerpt":"Writing this post to keep track of the steps I followed while installing neo4j on an azure virtual machine (Linux). Create a Virtual Machine Create a Linux…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/603756bd90493d8e35ebb022d576ed56/b17f8/logo.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHo6LEwXK//xAAZEAEAAgMAAAAAAAAAAAAAAAACAxIAASD/2gAIAQEAAQUCjkaVll98f//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPwEMn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAARIDEy/9oACAEBAAY/AkZKh//EABsQAQACAgMAAAAAAAAAAAAAAAEAMRARIVGR/9oACAEBAAE/IXyDyp2w7OIAKM//2gAMAwEAAgADAAAAEFTP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/EGEW5//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB4QAAICAgIDAAAAAAAAAAAAAAERITEAURBBkfDx/9oACAEBAAE/EDjy2lvfGCSBal/d9ZHEBFgijjRAZZQs8//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"neo4j_logo\"\n        title=\"neo4j_logo\"\n        src=\"/static/603756bd90493d8e35ebb022d576ed56/1c72d/logo.jpg\"\n        srcset=\"/static/603756bd90493d8e35ebb022d576ed56/a80bd/logo.jpg 148w,\n/static/603756bd90493d8e35ebb022d576ed56/1c91a/logo.jpg 295w,\n/static/603756bd90493d8e35ebb022d576ed56/1c72d/logo.jpg 590w,\n/static/603756bd90493d8e35ebb022d576ed56/a8a14/logo.jpg 885w,\n/static/603756bd90493d8e35ebb022d576ed56/fbd2c/logo.jpg 1180w,\n/static/603756bd90493d8e35ebb022d576ed56/b17f8/logo.jpg 1600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Writing this post to keep track of the steps I followed while installing neo4j on an azure virtual machine (Linux).</p>\n<h3>Create a Virtual Machine</h3>\n<p>Create a Linux virtual machine on a cloud provider of your choice. I used Microsoft Azure for the same. For the VM’s on aws and other platforms, steps to install neo4j server will almost remain same. Useful <a href=\"https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal\">docs</a> for creating a VM on azure.</p>\n<h3>Connect to your Virtual Machine</h3>\n<p>After instantiating the VM, it will get started automatically. Use the public IP provided on the cloud provider’s dashboard to connect remotely. There are various tools for the same. <a href=\"https://www.putty.org/\">Putty</a> is a very popular choice.</p>\n<h3>Updating and Installing some required stuff</h3>\n<ul>\n<li><strong>Update the package repository list</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</code></pre></div>\n<ul>\n<li><strong>Installing JAVA:</strong>\nI will be using OpenJDK 8. You can install JDK 11 if you want to use the newer neo4j version 4.x . I will be using neo4j ver 3.5.x .</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> openjdk-8-jdk</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># To check the version</span>\njava -version</code></pre></div>\n<ul>\n<li><strong>Installing neo4j:</strong>\nFirst, we will be updating our package repositries and then simply installing the neo4j on our server.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Run in sequence</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">wget</span> -O - https://debian.neo4j.org/neotechnology.gpg.key <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -\n<span class=\"token function\">sudo</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'deb https://debian.neo4j.org/repo stable/'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> -a /etc/apt/sources.list.d/neo4j.list\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install neo4j</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> neo4j\n<span class=\"token comment\"># Check the version</span>\nneo4j --version</code></pre></div>\n<p>This will install neo4j on our linux VM (Using Debian here). These steps can vary with time. The official documentation for installing neo4j on Linux distros can be found <a href=\"https://neo4j.com/docs/operations-manual/current/installation/linux/\">here</a>. You can also follow other methods like exploding a tarball and installing neo4j from it according to the use case you have.</p>\n<h3>Steps to make this instance available over the internet</h3>\n<p>After installing neo4j server on our VM, we need to make it available over the Internet. From your cloud provider’s dashboard, open the settings for the VM and in the networking tab, add specific inbound / outbound rules for the ports that we will be accessing over public Internet. In case of neo4j these will be <code class=\"language-text\">7474</code> and <code class=\"language-text\">7687</code>. For azure, you can follow these <a href=\"https://docs.microsoft.com/en-us/azure/virtual-machines/windows/nsg-quickstart-portal\">docs</a></p>\n<p>Now, we have to make changes in our neo4j.conf file to accept connections to our database from outside world.</p>\n<p>Follow the below given steps to make the instance accessible over the required ports:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Use sudo when ever necessary if you are the root user</span>\n\n<span class=\"token comment\"># Open the conf file in your preferred editor</span>\n<span class=\"token function\">vi</span> /etc/neo4j/neo4j.conf</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># If you want to open the connection to all the outside ports, uncomment / add this line. (Use with caution!)</span>\ndbms.connectors.default_listen_address<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0\n\n<span class=\"token comment\"># For specific ports that we need for our use case, add the following lines to open connection to these ports.</span>\ndbms.connector.bolt.enabled<span class=\"token operator\">=</span>true\ndbms.connector.bolt.listen_address<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0:7687\ndbms.connector.http.enabled<span class=\"token operator\">=</span>true\ndbms.connector.http.listen_address<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0:7474\n\n<span class=\"token comment\"># If you have to disable authentication for some reason, uncomment / add the following</span>\ndbms.security.auth_enabled<span class=\"token operator\">=</span>false</code></pre></div>\n<p>Now use <code class=\"language-text\">sudo service neo4j restart</code> to start your neo4j with changes and access it over the URL <code class=\"language-text\">http://&lt;ip/dns&gt;:7474/browser/</code>.\nHere, you can either use the IP address of your VM or the dns address you may have configured. As the IP address can be dynamic, dns should be preferred. Now, you should be able to run this neo4j server from your local machine. The default auth and password will be <code class=\"language-text\">neo4j</code> .</p>\n<h2>Installing / Configuring APOC and GDS for our VM</h2>\n<p><a href=\"https://neo4j.com/labs/apoc/#:~:text=APOC%20is%20an%20add%2Don,all%20APOC%20functions%20and%20procedures\">APOC</a> is an add-on library for Neo4j that provides hundreds of procedures and functions adding a lot of useful functionality.</p>\n<p><a href=\"https://neo4j.com/docs/graph-data-science/current/introduction/\">GDS</a> (Graph Data Science) library provides efficiently implemented, parallel versions of common graph algorithms for Neo4j, exposed as <em>Cypher</em> procedures.</p>\n<h3>Configure APOC</h3>\n<ul>\n<li>Download the <a href=\"https://github.com/neo4j-contrib/neo4j-apoc-procedures\">APOC</a> jar file matching with your neo4j version (!required) and dump it in <code class=\"language-text\">/var/lib/neo4j/plugins</code>. You can use wget to download the jar file directly into the given directory.</li>\n<li>\n<p>Run the following cmds on terminal for required permissions.</p>\n<ul>\n<li><code class=\"language-text\">chown neo4j:neo4j file.jar</code> (Use sudo if necessary. Here <code class=\"language-text\">file</code> is the downloaded jar)</li>\n<li><code class=\"language-text\">chmod 755 file.jar</code></li>\n</ul>\n</li>\n<li>Now edit the neo4j.conf file for exposing the APOC procedures.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Uncomment / add the following line</span>\ndbms.security.procedures.whitelist<span class=\"token operator\">=</span>apoc.coll.*,apoc.load.*,apoc.*</code></pre></div>\n<ul>\n<li>Restart you neo4j server using <code class=\"language-text\">sudo service neo4j restart</code></li>\n</ul>\n<h2>Configure GDS (Graph Data Science)</h2>\n<ul>\n<li>Download the <a href=\"https://neo4j.com/download-center/\">GDS</a> jar file according to your <a href=\"https://neo4j.com/docs/graph-data-science/current/installation/#_supported_neo4j_versions\">neo4j</a> version. Dump this jar directly into <code class=\"language-text\">/var/lib/neo4j/plugins</code> .</li>\n<li>Now edit the neo4j.conf file for exposing the procedures.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Uncomment / add the following line</span>\ndbms.security.procedures.unrestricted<span class=\"token operator\">=</span>gds.*\n<span class=\"token comment\"># This line in enhanced from apoc step</span>\ndbms.security.procedures.whitelist<span class=\"token operator\">=</span>apoc.coll.*,apoc.load.*,apoc.*,gds.*</code></pre></div>\n<ul>\n<li>Restart you neo4j server using <code class=\"language-text\">sudo service neo4j restart</code></li>\n<li>Check if it is properly intalled using <code class=\"language-text\">CALL gds.list()</code> to list all procedures.</li>\n</ul>\n<blockquote>\n<p>For various file locations info, use this official <a href=\"https://neo4j.com/docs/operations-manual/current/configuration/file-locations/#file-locations\">docs</a> link.</p>\n</blockquote>\n<hr>\n<p>You are ready to go now. Let’s make some graphs !!\n<em>If any changes required for new updates, please make a pull request for the same. Thanks!</em> 🕳️</p>","frontmatter":{"title":"Installing Neo4j on a linux virtual machine","date":"September 26, 2020","description":"Steps to install neo4j on a linux Virtual Machine and integrating APOC and Graph Data Science Libraries with it.","categories":["neo4j, virtual machine, graph, APOC"]},"timeToRead":5}},"pageContext":{"slug":"/neo4j-virtual-machine/","previous":{"fields":{"slug":"/neural-style/"},"frontmatter":{"title":"Neural Style Transfer"}},"next":null}}}